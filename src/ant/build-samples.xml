<?xml version="1.0" encoding="UTF-8"?>

<!-- ====================================================================== -->
<!--                                                                        -->
<!--  JBoss, the OpenSource J2EE webOS                                      -->
<!--                                                                        -->
<!--  Distributable under LGPL license.                                     -->
<!--  See terms of license at http://www.gnu.org.                           -->
<!--                                                                        -->
<!-- ====================================================================== -->

<!-- $Id:build-samples.xml 1125 2006-10-03 15:45:31Z thomas.diesler@jboss.com $ -->

<project default="build-samples" name="JBossWS Samples">

  <!--
  |  Build the samples
  -->
  <target name="build-samples" description="Builds the samples." depends="prepare">

    <property name="samples.target" value="jbossws-samples-${version.id}"/>
    <property name="build.src.samples.dir" value="${build.dir}/${samples.target}"/>

    <copy todir="${build.src.samples.dir}">
      <fileset dir="${src.samples.dir}">
        <include name="common/imported-build.xml"/>
        <include name="ant.properties.example"/>
        <include name="**/build.xml"/>
      </fileset>
    </copy>

    <mkdir dir="${build.src.samples.dir}/lib"/>
    <copy todir="${build.src.samples.dir}/lib">
      <fileset dir="${jboss.client}">
        <include name="commons-logging.jar"/>
        <include name="jbossall-client.jar"/>
        <include name="mail.jar"/>
        <include name="jboss-aop-jdk50-client.jar"/>
        <include name="jboss-aspect-jdk50-client.jar"/>
        <include name="jboss-ejb3-client.jar"/>
      </fileset>
      <fileset dir="${build.lib.dir}">
        <include name="jbossws-jboss-integration.jar"/>
        <include name="jbossws-tomcat-integration.jar"/>
      </fileset>
    </copy>
    
    <!-- samples/common -->
    <mkdir dir="${build.src.samples.dir}/common/java"/>
    <mkdir dir="${build.src.samples.dir}/common/resources/overrides/jaxrpc/samples"/>

    <copy todir="${build.src.samples.dir}/common/java">
      <fileset dir="${test.java.dir}">
        <include name="org/jboss/test/ws/*.java"/>
      </fileset>
    </copy>
    <copy todir="${build.src.samples.dir}/common/resources">
      <fileset dir="${src.samples.dir}/common">
        <include name="jndi.properties"/>
        <include name="log4j.xml"/>
      </fileset>
    </copy>
    <copy todir="${build.src.samples.dir}/common/resources/overrides/jaxrpc/samples">
      <fileset dir="${test.resources.dir}/jaxrpc/samples-override"/>
    </copy>

    <!-- samples/docstyle -->
    <mkdir dir="${build.src.samples.dir}/jaxrpc/docstyle/java"/>
    <mkdir dir="${build.src.samples.dir}/jaxrpc/docstyle/resources"/>

    <copy todir="${build.src.samples.dir}/jaxrpc/docstyle/java">
      <fileset dir="${test.java.dir}">
        <include name="org/jboss/test/ws/jaxrpc/samples/docstyle/**"/>
      </fileset>
    </copy>
    <copy todir="${build.src.samples.dir}/jaxrpc/docstyle/resources">
      <fileset dir="${test.resources.dir}/jaxrpc/samples/docstyle"/>
    </copy>

    <!-- samples/dynamichandler -->
    <mkdir dir="${build.src.samples.dir}/jaxrpc/dynamichandler/java"/>
    <mkdir dir="${build.src.samples.dir}/jaxrpc/dynamichandler/resources"/>

    <copy todir="${build.src.samples.dir}/jaxrpc/dynamichandler/java">
      <fileset dir="${test.java.dir}">
        <include name="org/jboss/test/ws/jaxrpc/samples/dynamichandler/**"/>
      </fileset>
    </copy>
    <copy todir="${build.src.samples.dir}/jaxrpc/dynamichandler/resources">
      <fileset dir="${test.resources.dir}/jaxrpc/samples/dynamichandler"/>
    </copy>

    <!-- samples/exception -->
    <mkdir dir="${build.src.samples.dir}/jaxrpc/exception/java"/>
    <mkdir dir="${build.src.samples.dir}/jaxrpc/exception/resources"/>

    <copy todir="${build.src.samples.dir}/jaxrpc/exception/java">
      <fileset dir="${test.java.dir}">
        <include name="org/jboss/test/ws/jaxrpc/samples/exception/**"/>
      </fileset>
    </copy>
    <copy todir="${build.src.samples.dir}/jaxrpc/exception/resources">
      <fileset dir="${test.resources.dir}/jaxrpc/samples/exception"/>
    </copy>

    <!-- samples/handler -->
    <mkdir dir="${build.src.samples.dir}/jaxrpc/handler/java"/>
    <mkdir dir="${build.src.samples.dir}/jaxrpc/handler/resources"/>

    <copy todir="${build.src.samples.dir}/jaxrpc/handler/java">
      <fileset dir="${test.java.dir}">
        <include name="org/jboss/test/ws/jaxrpc/samples/handler/**"/>
      </fileset>
    </copy>
    <copy todir="${build.src.samples.dir}/jaxrpc/handler/resources">
      <fileset dir="${test.resources.dir}/jaxrpc/samples/handler"/>
    </copy>

    <!-- samples/holder -->
    <mkdir dir="${build.src.samples.dir}/jaxrpc/holder/java"/>
    <mkdir dir="${build.src.samples.dir}/jaxrpc/holder/resources"/>

    <copy todir="${build.src.samples.dir}/jaxrpc/holder/java">
      <fileset dir="${test.java.dir}">
        <include name="org/jboss/test/ws/jaxrpc/samples/holder/**"/>
      </fileset>
    </copy>
    <copy todir="${build.src.samples.dir}/jaxrpc/holder/resources">
      <fileset dir="${test.resources.dir}/jaxrpc/samples/holder"/>
    </copy>

    <!-- samples/jmstransport -->
    <mkdir dir="${build.src.samples.dir}/jaxrpc/jmstransport/java"/>
    <mkdir dir="${build.src.samples.dir}/jaxrpc/jmstransport/resources"/>

    <copy todir="${build.src.samples.dir}/jaxrpc/jmstransport/java">
      <fileset dir="${test.java.dir}">
        <include name="org/jboss/test/ws/jaxrpc/samples/jmstransport/**"/>
      </fileset>
    </copy>
    <copy todir="${build.src.samples.dir}/jaxrpc/jmstransport/resources">
      <fileset dir="${test.resources.dir}/jaxrpc/samples/jmstransport"/>
    </copy>

    <!-- samples/jsr109ejb -->
    <mkdir dir="${build.src.samples.dir}/jaxrpc/jsr109ejb/java"/>
    <mkdir dir="${build.src.samples.dir}/jaxrpc/jsr109ejb/resources"/>

    <copy todir="${build.src.samples.dir}/jaxrpc/jsr109ejb/java">
      <fileset dir="${test.java.dir}">
        <include name="org/jboss/test/ws/jaxrpc/samples/jsr109ejb/**"/>
      </fileset>
    </copy>
    <copy todir="${build.src.samples.dir}/jaxrpc/jsr109ejb/resources">
      <fileset dir="${test.resources.dir}/jaxrpc/samples/jsr109ejb"/>
    </copy>

    <!-- samples/jsr109pojo -->
    <mkdir dir="${build.src.samples.dir}/jaxrpc/jsr109pojo/java"/>
    <mkdir dir="${build.src.samples.dir}/jaxrpc/jsr109pojo/resources"/>

    <copy todir="${build.src.samples.dir}/jaxrpc/jsr109pojo/java">
      <fileset dir="${test.java.dir}">
        <include name="org/jboss/test/ws/jaxrpc/samples/jsr109pojo/**/*"/>
      </fileset>
    </copy>
    <copy todir="${build.src.samples.dir}/jaxrpc/jsr109pojo/resources">
      <fileset dir="${test.resources.dir}/jaxrpc/samples/jsr109pojo"/>
    </copy>

    <!-- samples/message -->
    <mkdir dir="${build.src.samples.dir}/jaxrpc/message/java"/>
    <mkdir dir="${build.src.samples.dir}/jaxrpc/message/resources"/>

    <copy todir="${build.src.samples.dir}/jaxrpc/message/java">
      <fileset dir="${test.java.dir}">
        <include name="org/jboss/test/ws/jaxrpc/samples/message/**"/>
      </fileset>
    </copy>
    <copy todir="${build.src.samples.dir}/jaxrpc/message/resources">
      <fileset dir="${test.resources.dir}/jaxrpc/samples/message"/>
    </copy>

    <!-- samples/mtom -->
    <mkdir dir="${build.src.samples.dir}/jaxrpc/mtom/java"/>
    <mkdir dir="${build.src.samples.dir}/jaxrpc/mtom/resources"/>

    <copy todir="${build.src.samples.dir}/jaxrpc/mtom/java">
      <fileset dir="${test.java.dir}">
        <include name="org/jboss/test/ws/jaxrpc/samples/mtom/**"/>
      </fileset>
    </copy>
    <copy todir="${build.src.samples.dir}/jaxrpc/mtom/resources">
      <fileset dir="${test.resources.dir}/jaxrpc/samples/mtom"/>
    </copy>

    <!-- samples/oneway -->
    <mkdir dir="${build.src.samples.dir}/jaxrpc/oneway/java"/>
    <mkdir dir="${build.src.samples.dir}/jaxrpc/oneway/resources"/>

    <copy todir="${build.src.samples.dir}/jaxrpc/oneway/java">
      <fileset dir="${test.java.dir}">
        <include name="org/jboss/test/ws/jaxrpc/samples/oneway/**"/>
      </fileset>
    </copy>
    <copy todir="${build.src.samples.dir}/jaxrpc/oneway/resources">
      <fileset dir="${test.resources.dir}/jaxrpc/samples/oneway"/>
    </copy>

    <!-- samples/rpcstyle -->
    <mkdir dir="${build.src.samples.dir}/jaxrpc/rpcstyle/java"/>
    <mkdir dir="${build.src.samples.dir}/jaxrpc/rpcstyle/resources"/>

    <copy todir="${build.src.samples.dir}/jaxrpc/rpcstyle/java">
      <fileset dir="${test.java.dir}">
        <include name="org/jboss/test/ws/jaxrpc/samples/rpcstyle/**"/>
      </fileset>
    </copy>
    <copy todir="${build.src.samples.dir}/jaxrpc/rpcstyle/resources">
      <fileset dir="${test.resources.dir}/jaxrpc/samples/rpcstyle"/>
    </copy>

    <!-- samples/secureejb -->
    <mkdir dir="${build.src.samples.dir}/jaxrpc/secureejb/java"/>
    <mkdir dir="${build.src.samples.dir}/jaxrpc/secureejb/resources"/>

    <copy todir="${build.src.samples.dir}/jaxrpc/secureejb/java">
      <fileset dir="${test.java.dir}">
        <include name="org/jboss/test/ws/jaxrpc/samples/secureejb/**"/>
      </fileset>
    </copy>
    <copy todir="${build.src.samples.dir}/jaxrpc/secureejb/resources">
      <fileset dir="${test.resources.dir}/jaxrpc/samples/secureejb"/>
    </copy>

    <!-- samples/swa -->
    <mkdir dir="${build.src.samples.dir}/jaxrpc/swa/java"/>
    <mkdir dir="${build.src.samples.dir}/jaxrpc/swa/resources"/>

    <copy todir="${build.src.samples.dir}/jaxrpc/swa/java">
      <fileset dir="${test.java.dir}">
        <include name="org/jboss/test/ws/jaxrpc/samples/swa/**"/>
      </fileset>
    </copy>
    <copy todir="${build.src.samples.dir}/jaxrpc/swa/resources">
      <fileset dir="${test.resources.dir}/jaxrpc/samples/swa"/>
    </copy>

    <!-- samples/wsbpel -->
    <mkdir dir="${build.src.samples.dir}/jaxrpc/wsbpel/java"/>
    <mkdir dir="${build.src.samples.dir}/jaxrpc/wsbpel/resources"/>
    
    <copy todir="${build.src.samples.dir}/jaxrpc/wsbpel/java">
      <fileset dir="${test.java.dir}">
        <include name="org/jboss/test/ws/jaxrpc/samples/wsbpel/**"/>
      </fileset>
    </copy>
    <copy todir="${build.src.samples.dir}/jaxrpc/wsbpel/resources">
      <fileset dir="${test.resources.dir}/jaxrpc/samples/wsbpel" />
    </copy>

    <!-- samples/wseventing -->
    <mkdir dir="${build.src.samples.dir}/jaxrpc/wseventing/java"/>
    <mkdir dir="${build.src.samples.dir}/jaxrpc/wseventing/resources"/>

    <copy todir="${build.src.samples.dir}/jaxrpc/wseventing/java">
      <fileset dir="${test.java.dir}">
        <include name="org/jboss/test/ws/jaxrpc/samples/wseventing/**"/>
      </fileset>
    </copy>
    <copy todir="${build.src.samples.dir}/jaxrpc/wseventing/resources">
      <fileset dir="${test.resources.dir}/jaxrpc/samples/wseventing"/>
    </copy>

    <!-- samples/wssecurity -->
    <mkdir dir="${build.src.samples.dir}/jaxrpc/wssecurity/java"/>
    <mkdir dir="${build.src.samples.dir}/jaxrpc/wssecurity/resources"/>

    <copy todir="${build.src.samples.dir}/jaxrpc/wssecurity/java">
      <fileset dir="${test.java.dir}">
        <include name="org/jboss/test/ws/jaxrpc/samples/wssecurity/**"/>
        <exclude name="org/jboss/test/ws/jaxrpc/samples/wssecurity/StorePassEncryptTestCase.java"/>
      </fileset>
    </copy>
    <copy todir="${build.src.samples.dir}/jaxrpc/wssecurity/resources">
      <fileset dir="${test.resources.dir}/jaxrpc/samples/wssecurity">
        <exclude name="store-pass-encrypt/**"/>
      </fileset>
    </copy>

    <!-- JAXWS samples - - - - - - - - - - - - - - - - - - - - - - -->
    
    <!-- samples/jsr181ejb -->
    <mkdir dir="${build.src.samples.dir}/jaxws/jsr181ejb/java"/>
    <mkdir dir="${build.src.samples.dir}/jaxws/jsr181ejb/resources"/>

    <copy todir="${build.src.samples.dir}/jaxws/jsr181ejb/java">
      <fileset dir="${test.java.dir}">
        <include name="org/jboss/test/ws/jaxws/samples/jsr181ejb/**"/>
      </fileset>
    </copy>
    <copy todir="${build.src.samples.dir}/jaxws/jsr181ejb/resources">
      <fileset dir="${test.resources.dir}/jaxws/samples/jsr181ejb"/>
    </copy>

    <!-- samples/jsr181pojo -->
    <mkdir dir="${build.src.samples.dir}/jaxws/jsr181pojo/java"/>
    <mkdir dir="${build.src.samples.dir}/jaxws/jsr181pojo/resources"/>

    <copy todir="${build.src.samples.dir}/jaxws/jsr181pojo/java">
      <fileset dir="${test.java.dir}">
        <include name="org/jboss/test/ws/jaxws/samples/jsr181pojo/**"/>
      </fileset>
    </copy>
    <copy todir="${build.src.samples.dir}/jaxws/jsr181pojo/resources">
      <fileset dir="${test.resources.dir}/jaxws/samples/jsr181pojo"/>
    </copy>

    <!-- samples/wsaddressing -->
    <mkdir dir="${build.src.samples.dir}/jaxws/wsaddressing/java"/>
    <mkdir dir="${build.src.samples.dir}/jaxws/wsaddressing/resources"/>

    <copy todir="${build.src.samples.dir}/jaxws/wsaddressing/java">
      <fileset dir="${test.java.dir}">
        <include name="org/jboss/test/ws/jaxws/samples/wsaddressing/**"/>
      </fileset>
    </copy>
    <copy todir="${build.src.samples.dir}/jaxws/wsaddressing/resources">
      <fileset dir="${test.resources.dir}/jaxws/samples/wsaddressing"/>
    </copy>


    <!-- samples/retail -->
    <mkdir dir="${build.src.samples.dir}/jaxws/retail/java"/>
    <mkdir dir="${build.src.samples.dir}/jaxws/retail/resources"/>

    <copy todir="${build.src.samples.dir}/jaxws/retail/java">
      <fileset dir="${test.java.dir}">
        <include name="org/jboss/test/ws/jaxws/samples/retail/**"/>
      </fileset>
    </copy>
    <copy todir="${build.src.samples.dir}/jaxws/retail/resources">
      <fileset dir="${test.resources.dir}/jaxws/samples/retail"/>
    </copy>

    <!-- Build the samples zip -->
    <zip destfile="${build.dir}/${samples.target}.zip">
      <fileset dir="${build.dir}" includes="${samples.target}/**"/>
    </zip>

  </target>

</project>
