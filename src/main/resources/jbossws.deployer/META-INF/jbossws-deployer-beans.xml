<?xml version="1.0" encoding="UTF-8"?>

<deployment xmlns="urn:jboss:bean-deployer:2.0">
  
  <bean name="ServiceEndpointManager" class="org.jboss.ws.core.server.ServiceEndpointManager">
    
    <!--
        The WSDL, that is a required deployment artifact for an endpoint, has a <soap:address>
        element which points to the location of the endpoint. JBoss supports rewriting of that SOAP address.
      
        If the content of <soap:address> is a valid URL, JBossWS will not rewrite it unless 'alwaysModifySOAPAddress' is true.
        If the content of <soap:address> is not a valid URL, JBossWS will rewrite it using the attribute values given below.
        
        If 'webServiceHost' is an empty string, JBossWS uses requesters host when rewriting the <soap:address>.
    -->
    <property name="webServiceHost">${jboss.bind.address}</property>
    <property name="webServiceSecurePort">8443</property>
    <property name="webServicePort">8080</property>
    <property name="alwaysModifySOAPAddress">true</property>
    
    <property name="serviceEndpointInvokerJSE">org.jboss.ws.core.server.ServiceEndpointInvokerJSE</property>
    <property name="serviceEndpointInvokerEJB3">org.jboss.ws.integration.jboss50.ServiceEndpointInvokerEJB3</property>
    <!-- Not implemented
    <property name="serviceEndpointInvokerEJB21">org.jboss.ws.integration.jboss50.ServiceEndpointInvokerEJB21</property>
    <property name="serviceEndpointInvokerMDB">org.jboss.ws.integration.jboss50.ServiceEndpointInvokerMDB</property>
    -->
  </bean>
  
  <bean name="ServiceEndpointDeployer" class="org.jboss.ws.core.server.ServiceEndpointDeployer">
    <property name="serviceEndpointManager">
      <inject bean="ServiceEndpointManager"/>
    </property>
  </bean>
  
  <bean name="ServiceEndpointPublisher" class="org.jboss.ws.integration.jboss50.ServiceEndpointPublisher">
    <property name="mainDeployer"><inject bean="MainDeployer"/></property>
    <property name="serviceEndpointServlet">org.jboss.ws.integration.jboss50.JBossServiceEndpointServlet</property>
  </bean>
  
  <!-- Bind JAXRPC Service objects in application client environment context  -->
  <bean name="ServiceRefHandler" class="org.jboss.ws.integration.jboss50.ServiceRefHandler"/>
  
  <!-- A subscription manager for WS-Eventing -->
  <bean name="SubscriptionManager" class="org.jboss.ws.extensions.eventing.mgmt.SubscriptionManager"/>
  
  <bean name="ServerConfig" class="org.jboss.ws.integration.jboss50.ServerConfigImpl"/>
  
  <bean name="KernelLocator" class="org.jboss.ws.core.server.KernelLocator">
    <!--property name="kernel"><inject bean="jboss.kernel:service=Kernel"/></property-->
  </bean>
  
  <bean name="JAXWSDeployerEJB3" class="org.jboss.ws.integration.jboss50.JAXWSDeployerEJB3">
    <install bean="MainDeployer" method="addDeployer">
      <parameter>
        <this/>
      </parameter>
    </install>
    <uninstall bean="MainDeployer" method="removeDeployer">
      <parameter>
        <this/>
      </parameter>
    </uninstall>
    <depends>EJBRegistrationDeployer</depends>
    <depends>JBossWebAppParsingDeployer</depends>
    <depends>ServiceEndpointManager</depends>
  </bean>
  
  <bean name="JAXWSDeployerJSE" class="org.jboss.ws.integration.jboss50.JAXWSDeployerJSE">
    <install bean="MainDeployer" method="addDeployer">
      <parameter>
        <this/>
      </parameter>
    </install>
    <uninstall bean="MainDeployer" method="removeDeployer">
      <parameter>
        <this/>
      </parameter>
    </uninstall>
    <depends>JBossWebAppParsingDeployer</depends>
    <depends>ServiceEndpointManager</depends>
  </bean>
  
  <bean name="JAXRPCDeployerJSE" class="org.jboss.ws.integration.jboss50.JAXRPCDeployerJSE">
    <install bean="MainDeployer" method="addDeployer">
      <parameter>
        <this/>
      </parameter>
    </install>
    <uninstall bean="MainDeployer" method="removeDeployer">
      <parameter>
        <this/>
      </parameter>
    </uninstall>
    <depends>JBossWebAppParsingDeployer</depends>
    <depends>ServiceEndpointManager</depends>
  </bean>
  
  <bean name="ServiceEndpointLifecycleDeployer" class="org.jboss.ws.integration.jboss50.ServiceEndpointLifecycleDeployer">
    <install bean="MainDeployer" method="addDeployer">
      <parameter>
        <this/>
      </parameter>
    </install>
    <uninstall bean="MainDeployer" method="removeDeployer">
      <parameter>
        <this/>
      </parameter>
    </uninstall>
    <depends>ServiceEndpointManager</depends>
  </bean>
  
</deployment>
