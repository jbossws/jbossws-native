<?xml version="1.0" encoding="UTF-8"?>

<!-- $Id:build.xml 1125 2006-10-03 15:45:31Z thomas.diesler@jboss.com $ -->

<project default="main" basedir="../.." name="JBossWS Examples">

   <property name="chapter" value="jaxws/wseventing"/>
   <property name="sample.path" value="jaxws/samples/wseventing"/>
   <property name="java.dir" value="${basedir}/${chapter}/java"/>
   <property name="resources.dir" value="${basedir}/${chapter}/resources"/>

   <import file="${basedir}/common/imported-build.xml"/>

    <target name="generate-sources" depends="compile" description="Generate the deployment resources.">
      
      <!-- Define a taskdef for the wstools ant task -->
      <taskdef name="wstools" classname="org.jboss.ws.tools.ant.wstools">
        <classpath refid="compile.classpath"/>
        <classpath path="${build.tests.dir}/classes"/>
        <classpath path="${build.tests.dir}"/>
      </taskdef>
      

    </target>

   <!--
   Build the test deployments
   -->
   <target name="jars" depends="compile,copy-resources,generate-sources,compile-generated,copy-generated" description="build the deployments">     
      <!-- jaxws-samples-wseventing.war -->
      <war warfile="${build.tests.dir}/libs/jaxws-samples-wseventing.war"
           webxml="${build.tests.dir}/resources/jaxws/samples/wseventing/WEB-INF/web.xml">
         <classes dir="${build.tests.dir}/classes">
            <include name="org/jboss/test/ws/jaxws/samples/wseventing/*.class"/>
         </classes>
         <webinf dir="${build.tests.dir}/resources/jaxws/samples/wseventing/WEB-INF">
            <include name="wsdl/jboss-web.xml"/>
            <include name="wsdl/sysmon.wsdl"/>
            <include name="wsdl/ws-eventing.wsdl"/>
            <include name="wsdl/ws-eventing.xsd"/>
            <include name="wsdl/ws-addr.xsd"/>
         </webinf>
      </war>
   </target>

   <!--
   Run the testsuite
   -->
   <target name="tests" depends="jars" description="run the testsuite">
      <antcall target="test">
         <param name="test" value="${sample.path}"/>
      </antcall>
   </target>

</project>