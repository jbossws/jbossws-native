<assembly xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/assembly-1.1.0-SNAPSHOT.xsd">
  
  <id>binary-distribution</id>
  <formats>
    <format>dir</format>
  </formats>
  <includeBaseDirectory>false</includeBaseDirectory>
  
  <fileSets>
    <!-- root -->
    <fileSet>
      <directory>src/main/distro</directory>
      <outputDirectory>jbossws-native-bin-dist/</outputDirectory>
      <includes>
        <include>build.xml</include>
      </includes>
    </fileSet>
    <fileSet>
      <directory>src/main/distro</directory>
      <outputDirectory>jbossws-native-bin-dist/</outputDirectory>
      <filtered>true</filtered>
      <includes>
        <include>ant.properties.example</include>
      </includes>
    </fileSet>
    <!-- build -->
    <fileSet>
      <directory>src/main/distro</directory>
      <outputDirectory>jbossws-native-bin-dist/build</outputDirectory>
      <includes>
        <include>build-deploy.xml</include>
        <include>build-setup.xml</include>
        <include>build-project-gen.xml</include>
        <include>user-project-build.xml</include>
      </includes>
    </fileSet>
    <fileSet>
      <directory>modules/resources/src/main/resources/resources</directory>
      <outputDirectory>jbossws-native-bin-dist/build</outputDirectory>
      <includes>
        <include>deploy.conf</include>
        <include>server-deploy.conf</include>
        <include>jbossws-deploy-macros.xml</include>
      </includes>
    </fileSet>
    <!-- docs -->
    <fileSet>
      <directory>src/main/distro</directory>
      <outputDirectory>jbossws-native-bin-dist/docs</outputDirectory>
      <filtered>true</filtered>
      <includes>
        <include>Install.txt</include>
        <include>ReleaseNotes.txt</include>
        <include>JBossORG-EULA.txt</include>
      </includes>
    </fileSet>
    <fileSet>
      <directory>target/docbook/publish</directory>
      <outputDirectory>jbossws-native-bin-dist/docs</outputDirectory>
    </fileSet>
    <!-- deploy -->
    <fileSet>
      <directory>target/assembly/deploy-artifacts</directory>
      <outputDirectory>jbossws-native-bin-dist/deploy</outputDirectory>
    </fileSet>
    <!-- test etc -->
    <fileSet>
      <directory>modules/testsuite/native-tests/src/test</directory>
      <outputDirectory>jbossws-native-bin-dist/tests</outputDirectory>
      <includes>
        <include>etc/**</include>
      </includes>
    </fileSet>
    <!-- test excludes -->
    <fileSet>
      <directory>modules/testsuite</directory>
      <outputDirectory>jbossws-native-bin-dist/tests/resources</outputDirectory>
      <includes>
        <include>test-excludes-*.txt</include>
      </includes>
    </fileSet>
  </fileSets>
  
  <!-- shared tests -->
  <moduleSets>
    <moduleSet>
      <includes>
        <include>org.jboss.ws.native:jbossws-native-management</include>
      </includes>
      <binaries>
        <dependencySets>
          <dependencySet>
            <outputDirectory>jbossws-native-bin-dist/tests</outputDirectory>
            <useStrictFiltering>true</useStrictFiltering>
            <scope>provided</scope>
            <unpack>true</unpack>
            <includes>
              <include>*:jbossws-shared-testsuite:zip</include>
            </includes>
            <unpackOptions>
              <includes>
                <include>ant-import/**</include>
                <include>java/org/jboss/test/ws/console/**</include>
                <include>java/org/jboss/test/ws/jaxrpc/samples/**</include>
                <include>java/org/jboss/test/ws/jaxws/samples/**</include>
                <include>java/org/jboss/test/ws/jaxws/smoke/**</include>
                <include>java/org/jboss/test/ws/management/**</include>
                <include>java/org/jboss/test/ws/projectGenerator/**</include>
                <include>java/org/jboss/test/ws/saaj/**</include>
                <include>resources/console/**</include>
                <include>resources/jaxrpc/samples/**</include>
                <include>resources/jaxws/samples/**</include>
                <include>resources/jaxws/smoke/**</include>
                <include>resources/management/**</include>
                <include>resources/projectGenerator/**</include>
                <include>resources/saaj/**</include>
              </includes>
            </unpackOptions>
          </dependencySet>
        </dependencySets>
      </binaries>
    </moduleSet>
  </moduleSets>
  
</assembly>
