<?xml version="1.0" encoding="UTF-8"?>

<!-- ============================================================ -->
<!--  JBoss, the OpenSource J2EE webOS                            -->
<!--  Distributable under LGPL license.                           -->
<!--  See terms of license at http://www.gnu.org.                 -->
<!-- ============================================================ -->

<!-- $Id$ -->

<project name="JBossWS">

   <description>JBossWS test archive builder</description>   

   <!-- ================================================================== -->
   <!-- Building                                                           -->
   <!-- ================================================================== -->

   <target name="build-interop-jars">

      <mkdir dir="${build.tests.dir}/libs/"/>

      <!-- Root.war -->
      <war warfile="${build.test.dir}/libs/jbossws-interop-root.war"
           webxml="${test.resources.dir}/interop/microsoft/root/WEB-INF/web.xml">
         <webinf dir="${test.resources.dir}/interop/microsoft/root/WEB-INF">
            <include name="jboss-web.xml"/>
         </webinf>
         <fileset dir="${test.resources.dir}/interop/microsoft/root">
            <include name="*.*"/>
         </fileset>
      </war>

      <!-- BaseDataTypesDocLitB client -->
      <jar jarfile="${build.tests.dir}/libs/jbossws-interop-BaseDataTypesDocLitB-client.jar">
         <fileset dir="${build.tests.dir}/classes">
            <include name="org/jboss/test/ws/interop/microsoft/soapwsdl/BaseDataTypesDocLitB/**/*.class"/>
            <include name="org/jboss/test/ws/interop/microsoft/*.class"/>
         </fileset>
         <metainf dir="${test.resources.dir}/interop/microsoft/soapwsdl/BaseDataTypesDocLitB/WEB-INF">
            <include name="jaxrpc-mapping.xml"/>
            <include name="wsdl/**.*"/>
         </metainf>
         <metainf dir="${test.resources.dir}/interop/microsoft/soapwsdl/BaseDataTypesDocLitB/META-INF">
            <include name="application-client.xml"/>
            <include name="jboss-client.xml"/>
            <include name="scenarios.xml"/>
         </metainf>
      </jar>

      <!-- BaseDataTypesDocLitB_Service.war -->
      <war warfile="${build.tests.dir}/libs/jbossws-interop-BaseDataTypesDocLitB_Service.war"
           webxml="${test.resources.dir}/interop/microsoft/soapwsdl/BaseDataTypesDocLitB_Service/WEB-INF/web.xml">
         <classes dir="${build.tests.dir}/classes">
            <include name="org/jboss/test/ws/interop/microsoft/soapwsdl/BaseDataTypesDocLitB_Service/**/*.class"/>
            <include name="org/jboss/test/ws/interop/microsoft/*.class"/>
         </classes>
         <webinf dir="${test.resources.dir}/interop/microsoft/soapwsdl/BaseDataTypesDocLitB_Service/WEB-INF">
            <include name="jaxrpc-mapping.xml"/>
            <include name="webservices.xml"/>
            <include name="wsdl/**.*"/>
            <include name="jboss-web.xml"/>
            <include name="scenarios.xml"/>
         </webinf>
         <fileset dir="${test.resources.dir}/interop/microsoft/soapwsdl/BaseDataTypesDocLitB_Service">
            <include name="*.*"/>
         </fileset>
      </war>

      <!-- BaseDataTypesDocLitW client -->
      <jar jarfile="${build.tests.dir}/libs/jbossws-interop-BaseDataTypesDocLitW-client.jar">
         <fileset dir="${build.tests.dir}/classes">
            <include name="org/jboss/test/ws/interop/microsoft/soapwsdl/BaseDataTypesDocLitW/**/*.class"/>
            <include name="org/jboss/test/ws/interop/microsoft/*.class"/>
         </fileset>
         <metainf dir="${test.resources.dir}/interop/microsoft/soapwsdl/BaseDataTypesDocLitW/WEB-INF">
            <include name="jaxrpc-mapping.xml"/>
            <include name="wsdl/**"/>
         </metainf>
         <metainf dir="${test.resources.dir}/interop/microsoft/soapwsdl/BaseDataTypesDocLitW/META-INF">
            <include name="application-client.xml"/>
            <include name="jboss-client.xml"/>
            <include name="scenarios.xml"/>
         </metainf>
      </jar>

      <!-- BaseDataTypesRpcLit client -->
      <jar jarfile="${build.tests.dir}/libs/jbossws-interop-BaseDataTypesRpcLit-client.jar">
         <fileset dir="${build.tests.dir}/classes">
            <include name="org/jboss/test/ws/interop/microsoft/soapwsdl/BaseDataTypesRpcLit/**/*.class"/>
            <include name="org/jboss/test/ws/interop/microsoft/*.class"/>
         </fileset>
         <metainf dir="${test.resources.dir}/interop/microsoft/soapwsdl/BaseDataTypesRpcLit/WEB-INF">
            <include name="jaxrpc-mapping.xml"/>
            <include name="wsdl/**"/>
         </metainf>
         <metainf dir="${test.resources.dir}/interop/microsoft/soapwsdl/BaseDataTypesRpcLit/META-INF">
            <include name="application-client.xml"/>
            <include name="jboss-client.xml"/>
            <include name="scenarios.xml"/>
         </metainf>
      </jar>

      <!-- ComplexDataTypesDocLitB client -->
      <jar jarfile="${build.tests.dir}/libs/jbossws-interop-ComplexDataTypesDocLitB-client.jar">
         <fileset dir="${build.tests.dir}/classes">
            <include name="org/jboss/test/ws/interop/microsoft/soapwsdl/ComplexDataTypesDocLitB/**/*.class"/>
            <include name="org/jboss/test/ws/interop/microsoft/*.class"/>
         </fileset>
         <metainf dir="${test.resources.dir}/interop/microsoft/soapwsdl/ComplexDataTypesDocLitB/WEB-INF">
            <include name="jaxrpc-mapping.xml"/>
            <include name="wsdl/**"/>
         </metainf>
         <metainf dir="${test.resources.dir}/interop/microsoft/soapwsdl/ComplexDataTypesDocLitB/META-INF">
            <include name="application-client.xml"/>
            <include name="jboss-client.xml"/>
            <include name="scenarios.xml"/>
         </metainf>
      </jar>

      <!-- ComplexDataTypesDocLitW client -->
      <jar jarfile="${build.tests.dir}/libs/jbossws-interop-ComplexDataTypesDocLitW-client.jar">
         <fileset dir="${build.tests.dir}/classes">
            <include name="org/jboss/test/ws/interop/microsoft/soapwsdl/ComplexDataTypesDocLitW/**/*.class"/>
            <include name="org/jboss/test/ws/interop/microsoft/*.class"/>
         </fileset>
         <metainf dir="${test.resources.dir}/interop/microsoft/soapwsdl/ComplexDataTypesDocLitW/WEB-INF">
            <include name="jaxrpc-mapping.xml"/>
            <include name="wsdl/**"/>
         </metainf>
         <metainf dir="${test.resources.dir}/interop/microsoft/soapwsdl/ComplexDataTypesDocLitW/META-INF">
            <include name="application-client.xml"/>
            <include name="jboss-client.xml"/>
            <include name="scenarios.xml"/>
         </metainf>
      </jar>

      <!-- ComplexDataTypesRpcLit client -->
      <jar jarfile="${build.tests.dir}/libs/jbossws-interop-ComplexDataTypesRpcLit-client.jar">
         <fileset dir="${build.tests.dir}/classes">
            <include name="org/jboss/test/ws/interop/microsoft/soapwsdl/ComplexDataTypesRpcLit/**/*.class"/>
            <include name="org/jboss/test/ws/interop/microsoft/*.class"/>
         </fileset>
         <metainf dir="${test.resources.dir}/interop/microsoft/soapwsdl/ComplexDataTypesRpcLit/WEB-INF">
            <include name="jaxrpc-mapping.xml"/>
            <include name="wsdl/**"/>
         </metainf>
         <metainf dir="${test.resources.dir}/interop/microsoft/soapwsdl/ComplexDataTypesRpcLit/META-INF">
            <include name="application-client.xml"/>
            <include name="jboss-client.xml"/>
            <include name="scenarios.xml"/>
         </metainf>
      </jar>

      <!-- BaseDataTypesDocLitW_Service.war -->
      <war warfile="${build.tests.dir}/libs/jbossws-interop-BaseDataTypesDocLitW_Service.war"
           webxml="${test.resources.dir}/interop/microsoft/soapwsdl/BaseDataTypesDocLitW_Service/WEB-INF/web.xml">
         <classes dir="${build.tests.dir}/classes">
            <include name="org/jboss/test/ws/interop/microsoft/soapwsdl/BaseDataTypesDocLitW_Service/**/*.class"/>
            <include name="org/jboss/test/ws/interop/microsoft/*.class"/>
         </classes>
         <webinf dir="${test.resources.dir}/interop/microsoft/soapwsdl/BaseDataTypesDocLitW_Service/WEB-INF">
            <include name="jaxrpc-mapping.xml"/>
            <include name="webservices.xml"/>
            <include name="wsdl/**"/>
            <include name="jboss-web.xml"/>
            <include name="scenarios.xml"/>
         </webinf>
         <fileset dir="${test.resources.dir}/interop/microsoft/soapwsdl/BaseDataTypesDocLitW_Service">
            <include name="*.*"/>
         </fileset>
      </war>

      <!-- BaseDataTypesRpcLit_Service.war -->
      <war warfile="${build.tests.dir}/libs/jbossws-interop-BaseDataTypesRpcLit_Service.war"
           webxml="${test.resources.dir}/interop/microsoft/soapwsdl/BaseDataTypesRpcLit_Service/WEB-INF/web.xml">
         <classes dir="${build.tests.dir}/classes">
            <include name="org/jboss/test/ws/interop/microsoft/soapwsdl/BaseDataTypesRpcLit_Service/**/*.class"/>
            <include name="org/jboss/test/ws/interop/microsoft/*.class"/>
         </classes>
         <webinf dir="${test.resources.dir}/interop/microsoft/soapwsdl/BaseDataTypesRpcLit_Service/WEB-INF">
            <include name="jaxrpc-mapping.xml"/>
            <include name="webservices.xml"/>
            <include name="wsdl/**"/>
            <include name="jboss-web.xml"/>
            <include name="scenarios.xml"/>
         </webinf>
         <fileset dir="${test.resources.dir}/interop/microsoft/soapwsdl/BaseDataTypesRpcLit_Service">
            <include name="*.*"/>
         </fileset>
      </war>

      <!-- ComplexDataTypesDocLitB_Service.war -->
      <war warfile="${build.tests.dir}/libs/jbossws-interop-ComplexDataTypesDocLitB_Service.war"
           webxml="${test.resources.dir}/interop/microsoft/soapwsdl/ComplexDataTypesDocLitB_Service/WEB-INF/web.xml">
         <classes dir="${build.tests.dir}/classes">
            <include name="org/jboss/test/ws/interop/microsoft/soapwsdl/ComplexDataTypesDocLitB_Service/**/*.class"/>
            <include name="org/jboss/test/ws/interop/microsoft/*.class"/>
         </classes>
         <classes dir="${build.tests.dir}/classes">
            <include name="org/jboss/test/ws/interop/microsoft/soapwsdl/ComplexDataTypesShared/**/*.class"/>
         </classes>
         <webinf dir="${test.resources.dir}/interop/microsoft/soapwsdl/ComplexDataTypesDocLitB_Service/WEB-INF">
            <include name="jaxrpc-mapping.xml"/>
            <include name="webservices.xml"/>
            <include name="wsdl/**"/>
            <include name="jboss-web.xml"/>
            <include name="scenarios.xml"/>
         </webinf>
         <fileset dir="${test.resources.dir}/interop/microsoft/soapwsdl/ComplexDataTypesDocLitB_Service">
            <include name="*.*"/>
         </fileset>
      </war>

      <!-- ComplexDataTypesDocLitW_Service.war -->
      <war warfile="${build.tests.dir}/libs/jbossws-interop-ComplexDataTypesDocLitW_Service.war"
           webxml="${test.resources.dir}/interop/microsoft/soapwsdl/ComplexDataTypesDocLitW_Service/WEB-INF/web.xml">
         <classes dir="${build.tests.dir}/classes">
            <include name="org/jboss/test/ws/interop/microsoft/soapwsdl/ComplexDataTypesDocLitW_Service/**/*.class"/>
            <include name="org/jboss/test/ws/interop/microsoft/*.class"/>
         </classes>
         <classes dir="${build.tests.dir}/classes">
            <include name="org/jboss/test/ws/interop/microsoft/soapwsdl/ComplexDataTypesShared/**/*.class"/>
         </classes>
         <webinf dir="${test.resources.dir}/interop/microsoft/soapwsdl/ComplexDataTypesDocLitW_Service/WEB-INF">
            <include name="jaxrpc-mapping.xml"/>
            <include name="webservices.xml"/>
            <include name="wsdl/**"/>
            <include name="jboss-web.xml"/>
            <include name="scenarios.xml"/>
         </webinf>
         <fileset dir="${test.resources.dir}/interop/microsoft/soapwsdl/ComplexDataTypesDocLitW_Service">
            <include name="*.*"/>
         </fileset>
      </war>

      <!-- ComplexDataTypesRpcLit_Service.war -->
      <war warfile="${build.tests.dir}/libs/jbossws-interop-ComplexDataTypesRpcLit_Service.war"
           webxml="${test.resources.dir}/interop/microsoft/soapwsdl/ComplexDataTypesRpcLit_Service/WEB-INF/web.xml">
         <classes dir="${build.tests.dir}/classes">
            <include name="org/jboss/test/ws/interop/microsoft/soapwsdl/ComplexDataTypesRpcLit_Service/**/*.class"/>
            <include name="org/jboss/test/ws/interop/microsoft/*.class"/>
         </classes>
         <classes dir="${build.tests.dir}/classes">
            <include name="org/jboss/test/ws/interop/microsoft/soapwsdl/ComplexDataTypesShared/**/*.class"/>
         </classes>
         <webinf dir="${test.resources.dir}/interop/microsoft/soapwsdl/ComplexDataTypesRpcLit_Service/WEB-INF">
            <include name="jaxrpc-mapping.xml"/>
            <include name="webservices.xml"/>
            <include name="wsdl/**"/>
            <include name="jboss-web.xml"/>
            <include name="scenarios.xml"/>
         </webinf>
         <fileset dir="${test.resources.dir}/interop/microsoft/soapwsdl/ComplexDataTypesRpcLit_Service">
            <include name="*.*"/>
         </fileset>
      </war>

      <!-- mtom-utf8.war -->
      <war warfile="${build.tests.dir}/libs/jbossws-interop-mtomUTF8.war"
           webxml="${test.resources.dir}/interop/microsoft/mtom/utf8/WEB-INF/web.xml">
         <classes dir="${build.tests.dir}/classes">
            <include name="org/jboss/test/ws/interop/microsoft/mtom/utf8/**/*.class"/>
            <include name="org/jboss/test/ws/interop/microsoft/*.class"/>
         </classes>
         <webinf dir="${test.resources.dir}/interop/microsoft/mtom/utf8/WEB-INF">
            <include name="jaxrpc-mapping.xml"/>
            <include name="webservices.xml"/>
            <include name="wsdl/**.*"/>
            <include name="jboss-web.xml"/>
         </webinf>
         <fileset dir="${test.resources.dir}/interop/microsoft/mtom/utf8">
            <include name="*.*"/>
         </fileset>
      </war>

      <!-- mtom-utf8 client -->
      <jar jarfile="${build.tests.dir}/libs/jbossws-interop-mtomUTF8-client.jar">
         <fileset dir="${build.tests.dir}/classes">
            <include name="org/jboss/test/ws/interop/microsoft/mtom/utf8/**/*.class"/>
            <include name="org/jboss/test/ws/interop/microsoft/*.class"/>
         </fileset>
         <metainf dir="${test.resources.dir}/interop/microsoft/mtom/utf8/WEB-INF">
            <include name="jaxrpc-mapping.xml"/>
            <include name="wsdl/**"/>
         </metainf>
         <metainf dir="${test.resources.dir}/interop/microsoft/mtom/utf8/META-INF">
            <include name="application-client.xml"/>
            <include name="jboss-client.xml"/>            
            <include name="scenarios.xml"/>
         </metainf>
      </jar>
      <!-- mtom-utf8_wsse-sign.war -->
      <war warfile="${build.test.dir}/libs/jbossws-interop-mtomUTF8_wsse.war"
           webxml="${test.resources.dir}/interop/microsoft/mtom/utf8/wsse/WEB-INF/web.xml">
         <classes dir="${build.test.dir}/classes">
            <include name="org/jboss/test/ws/interop/microsoft/mtom/utf8/**/*.class"/>
            <include name="org/jboss/test/ws/interop/microsoft/*.class"/>
         </classes>

         <webinf dir="${test.resources.dir}/interop/microsoft/mtom/utf8/WEB-INF">
            <include name="jaxrpc-mapping.xml"/>
            <include name="webservices.xml"/>
            <include name="wsdl/**.*"/>
         </webinf>
          <webinf dir="${test.resources.dir}/interop/microsoft/security/wsse10Shared/META-INF">
            <include name="alice.jks"/>
            <include name="wsse10.truststore"/>
         </webinf>

         <webinf dir="${test.resources.dir}/interop/microsoft/mtom/utf8/wsse/WEB-INF">
            <include name="jboss-wsse-server.xml"/>
            <include name="jboss-web.xml"/>
         </webinf>
         <fileset dir="${test.resources.dir}/interop/microsoft/mtom/utf8">
            <include name="*.*"/>
         </fileset>
      </war>

      <!-- mtom-utf8_wsse-sign client -->
      <jar jarfile="${build.test.dir}/libs/jbossws-interop-mtomUTF8_wsse-client.jar">
         <fileset dir="${build.test.dir}/classes">
            <include name="org/jboss/test/ws/interop/microsoft/mtom/utf8/**/*.class"/>
            <include name="org/jboss/test/ws/interop/microsoft/*.class"/>
         </fileset>
         <metainf dir="${test.resources.dir}/interop/microsoft/mtom/utf8/WEB-INF">
            <include name="jaxrpc-mapping.xml"/>
            <include name="wsdl/**"/>
         </metainf>
         <metainf dir="${test.resources.dir}/interop/microsoft/security/wsse10Shared/META-INF">
            <include name="alice.jks"/>
            <include name="wsse10.truststore"/>
         </metainf>
         <metainf dir="${test.resources.dir}/interop/microsoft/mtom/utf8/wsse/META-INF">
            <include name="jboss-client.xml"/>
            <include name="jboss-wsse-client.xml"/>
            <include name="application-client.xml"/>
            <include name="scenarios.xml"/>
         </metainf>
      </jar>
   </target>

</project>