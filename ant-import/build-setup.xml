<?xml version="1.0" encoding="UTF-8"?>

<!-- ====================================================================== -->
<!--                                                                        -->
<!--  JBoss, the OpenSource J2EE webOS                                      -->
<!--                                                                        -->
<!--  Distributable under LGPL license.                                     -->
<!--  See terms of license at http://www.gnu.org.                           -->
<!--                                                                        -->
<!-- ====================================================================== -->

<!-- $Id: build-setup.xml 4147 2007-08-03 10:08:11Z thomas.diesler@jboss.com $ -->

<project>
  
  <!-- ================================================================== -->
  <!-- Setup                                                              -->
  <!-- ================================================================== -->
  
  <!-- Check if ant.properties is available -->
  <available property="ant.properties.available" file="${basedir}/ant.properties"/>
  <fail message="Cannot find ant.properties. Did you copy/edit ant.properties.example?" unless="ant.properties.available"/>
  
  <property file="${basedir}/ant.properties"/>
  <property file="${basedir}/version.properties"/>
  
  <property name="jboss405.lib" value="${jboss405.home}/lib"/>
  <property name="jboss405.client" value="${jboss405.home}/client"/>
  <property name="jboss405.server" value="${jboss405.home}/server/${jboss.server.instance}"/>
  <property name="jboss405.server.lib" value="${jboss405.server}/lib"/>
  <property name="jboss405.server.deploy" value="${jboss405.server}/deploy"/>

  <property name="jboss421.lib" value="${jboss421.home}/lib"/>
  <property name="jboss421.client" value="${jboss421.home}/client"/>
  <property name="jboss421.server" value="${jboss421.home}/server/${jboss.server.instance}"/>
  <property name="jboss421.server.lib" value="${jboss421.server}/lib"/>
  <property name="jboss421.server.deploy" value="${jboss421.server}/deploy"/>

  <property name="jboss422.lib" value="${jboss422.home}/lib"/>
  <property name="jboss422.client" value="${jboss422.home}/client"/>
  <property name="jboss422.server" value="${jboss422.home}/server/${jboss.server.instance}"/>
  <property name="jboss422.server.lib" value="${jboss422.server}/lib"/>
  <property name="jboss422.server.deploy" value="${jboss422.server}/deploy"/>

  <property name="jboss423.lib" value="${jboss423.home}/lib"/>
  <property name="jboss423.client" value="${jboss423.home}/client"/>
  <property name="jboss423.server" value="${jboss423.home}/server/${jboss.server.instance}"/>
  <property name="jboss423.server.lib" value="${jboss423.server}/lib"/>
  <property name="jboss423.server.deploy" value="${jboss423.server}/deploy"/>

  <property name="jboss500.lib" value="${jboss500.home}/lib"/>
  <property name="jboss500.client" value="${jboss500.home}/client"/>
  <property name="jboss500.server" value="${jboss500.home}/server/${jboss.server.instance}"/>
  <property name="jboss500.server.lib" value="${jboss500.server}/lib"/>
  <property name="jboss500.server.deploy" value="${jboss500.server}/deploy"/>
  <property name="jboss500.server.deployers" value="${jboss500.server}/deployers"/>
  
  <property name="jboss.server.instance.${jboss.server.instance}" value="true"/>
 
  <property name="jboss405.available.file" value="${jboss405.client}/jboss-client.jar"/>
  <property name="jboss421.available.file" value="${jboss421.client}/jboss-client.jar"/>
  <property name="jboss422.available.file" value="${jboss422.client}/jboss-client.jar"/>
  <property name="jboss423.available.file" value="${jboss423.client}/jboss-client.jar"/>
  <property name="jboss500.available.file" value="${jboss500.client}/jboss-ejb3-client.jar"/>
  
  <available property="jboss405.available" file="${jboss405.available.file}"/>
  <available property="jboss405.ejb3.available" file="${jboss405.client}/jboss-ejb3-client.jar"/>
  <available property="jboss421.available" file="${jboss421.available.file}"/>
  <available property="jboss422.available" file="${jboss422.available.file}"/>
  <available property="jboss423.available" file="${jboss423.available.file}"/>
  <available property="jboss500.available" file="${jboss500.available.file}"/>
  
  <condition property="jbossws.integration.jboss40" value="true">
    <or>
      <equals arg1="${jbossws.integration.target}" arg2="jboss405"/>
      <equals arg1="${jbossws.integration.target}" arg2="jboss405.no.ejb3"/>
    </or>
  </condition>
  <condition property="jbossws.integration.jboss42" value="true">
    <or>
      <equals arg1="${jbossws.integration.target}" arg2="jboss421"/>
      <equals arg1="${jbossws.integration.target}" arg2="jboss422"/>
      <equals arg1="${jbossws.integration.target}" arg2="jboss423"/>
    </or>
  </condition>
  <condition property="jbossws.integration.jboss50" value="true">
    <equals arg1="${jbossws.integration.target}" arg2="jboss500"/>
  </condition>
  
  <available property="jbossws.portal.content.available" file="${jbossws.portal.content}" type="dir"/>
  
  <!-- JDK Detection -->
  <available classname="java.lang.Enum" property="HAVE_JDK_1.5"/>
  <available classname="java.io.Console" property="HAVE_JDK_1.6"/>
  
  <fail message="JDK1.5 or above is required" unless="HAVE_JDK_1.5"/>
  
  <!-- ================================================================== -->
  <!-- Initialization                                                     -->
  <!-- ================================================================== -->
  
  <target name="prepare">
    <tstamp>
      <format property="build.id" pattern="yyyyMMddHHmm"/>
    </tstamp>
  </target>
  
</project>
